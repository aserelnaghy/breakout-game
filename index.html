<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Breakout Game</title>
  <link rel="stylesheet" href="./css/style.css">
</head>

<body>
  <div class="game-container">
    <!-- Canvas -->
    <canvas id="myCanvas"></canvas>

    <!-- HUD -->
    <div class="hud">
      <div>Score: <span id="score">0</span></div>
      <div>Top Score: <span id="topScore">0</span></div>
    </div>

    <!-- Overlay Start Screen -->
    <div id="welcomeScreen" class="overlay">
      <div class="overlay-content">
        <h1>Breakout Game üéÆ</h1>

        <p><strong>How to Play:</strong></p>
        <ul>
          <li>‚¨ÖÔ∏è ‚û°Ô∏è : Move Paddle</li>
          <li><kbd>‚ê£</kbd> or üñ±Ô∏è Click : Launch Ball</li>
          <li>üñ±Ô∏è Move Mouse : Control Paddle</li>
          <li>ü•á Score Points by Hitting Bricks</li>
        </ul>

        <!-- Player Name -->
        <label for="playerName">Enter Your Name:</label><br>
        <input type="text" id="playerName" placeholder="Your name..." /><br>

        <!-- Level Select -->
        <label for="levelSelect">Choose Level:</label><br>
        <select id="levelSelect">
          <option value="3">HARD</option>
          <option value="2">MID</option>
          <option value="1">EASY</option>
        </select><br><br>

        <!-- Start Button -->
        <button id="startBtn" class="btn">Start Game</button>
      </div>
    </div>


  <!-- Game Scripts -->
  <script type="module" src="./js/objects.js"></script>
  <script type="module" src="./js/input.js"></script>
  <script type="module" src="./js/motion.js"></script>
  <script type="module" src="./js/script.js"></script>

  <!-- Overlay Logic -->
  <script type="module">
    import { loadLevelByIndex, resetLevels } from "./js/levels.js";
    import { canvas, ctx } from "./js/script.js";

    document.getElementById('startBtn').addEventListener('click', () => {
      const playerName = document.getElementById('playerName').value || "Player";
      const levelIndex = parseInt(document.getElementById('levelSelect').value);

      localStorage.setItem('playerName', playerName);
      localStorage.setItem('selectedLevel', levelIndex);

      // Hide overlay
      document.getElementById('welcomeScreen').style.display = "none";

      // Load selected level
      loadLevelByIndex(levelIndex-1, canvas, ctx);

      // Start the game loop if not already started
      // gameLoop(canvas, ctx, drawCanvas);
    });
  </script>

</body>

</html>
